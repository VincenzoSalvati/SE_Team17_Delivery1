<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
    <!-- Bootstrap CSS -->
    <link crossorigin="anonymous" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
          integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" rel="stylesheet">
    <link href="../CSS/1_showActivities.css" rel="stylesheet"
          type="text/css">

    <title>Show Activities</title>
</head>

<script crossorigin="anonymous"
        integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
        src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script crossorigin="anonymous"
        integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
        src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"></script>

<body style="background-color: rgb(228, 228, 228)">
<div class="topnav">
    <a align="center" style="color: white">WEEK </a>
    <a align="center" id="text" style="color: white"></a>
</div>

<div class="container-fluid">

    <div _ngcontent-whm-c5="" class="card" style="top: 40px;">
        <div class="card-header card-header-warning">
            <h4 class="card-title" style="font-size: x-large">Activity list</h4>
            <p class="card-category" style="font-size: medium">All the activity to be assigned.</p>
        </div>

        <div class="card-body table-responsive">
            <table class="table table">

                <thead class="text-warning">
                <th>ID</th>
                <th>AREA</th>
                <th>TYPE</th>
                <th>Estimated intervention time [min]</th>
                <th></th>

                <template id="activity-row-template">
                    <tr>
                        <td class="id">{Id}</td>
                        <td>{Area}</td>
                        <td>{Type}</td>
                        <td class="time">{EstimatedTime}</td>
                        <td class="btn_cell">
                            <button class="btn btn-primary" onclick="next()" type="button">Select</button>
                        </td>
                    </tr>
                </template>

                </thead>

                <tbody id="activity-rows">
                </tbody>

                <tfoot>
                <tr>
                    <th colspan="6" style="background-color: white;">
                        <span id="request-status"></span>
                    </th>
                </tr>
                </tfoot>

            </table>
        </div>
    </div>

</div>


<script>

    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    const week = urlParams.get('week')

    window.onload = console.log(localStorage.getItem("week"));
    document.getElementById("text").innerHTML = week;

    function next() {
        //mi prendo il campo id della riga che seleziono
        $(".btn_cell").click(function () {
            var $row = $(this).closest("tr");    // Trovo la riga 'tr' pi√π vicina
            var $text = $row.find(".id").text(); // Ne prendo il contenuto
            var $time = $row.find(".time").text();
            location.href = "2_showSpecifications.html?activity=" + $text + "&week=" + week + "&time=" + $time;
        });
    }
</script>

<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>

<!-- Custom JS -->
<script src="../JAVASCRIPT/1_BrowseController.js" type="text/javascript"></script>

<script type="application/javascript">
    $(document).ready(function () {
        let controller = new BrowseController();
        controller.initBrowseView();
    });
</script>

</body>
</html>